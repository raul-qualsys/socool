<?php
 use Tygh\Registry; defined('BOOTSTRAP') or die('Access denied'); if ($_SERVER['REQUEST_METHOD'] == 'POST') { return array(CONTROLLER_STATUS_OK); } $facebook_pixel_ids = array( Registry::get('settings.sd_facebook_pixel.general.identifier_facebook_pixel') ); if ($mode == 'checkout' && !empty($_SESSION['cart']['products'])) { $company_ids = fn_array_column($_SESSION['cart']['products'], 'company_id'); if (!empty($company_ids)) { $facebook_pixel_ids += sd_MDFjMjlhYzk2MzIxOWI2Y2M1NjA0Yjhh($company_ids); } $facebook_checkout = sd_MDQ4NTA4ZjA3YTMyZjkxZjRlOWNhMGNi($_SESSION['cart']); Registry::get('view')->assign('facebook_checkout', $facebook_checkout); } elseif ($mode == 'complete' && !empty($_REQUEST['order_id'])) { $facebook_pixel_ids += sd_MjI3NTYyNTBjYTI1ODlmYWUwZDNmZGY4($_REQUEST['order_id']); $order_info = Tygh::$app['view']->getTemplateVars('order_info'); if (!empty($order_info)) { $facebook_pixel_orders = sd_MDQ4NTA4ZjA3YTMyZjkxZjRlOWNhMGNi($order_info); Registry::get('view')->assign('facebook_pixel_orders', $facebook_pixel_orders); } } Registry::get('view')->assign('facebook_pixel_ids', $facebook_pixel_ids);